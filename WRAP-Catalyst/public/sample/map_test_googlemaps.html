<!DOCTYPE html>
<html style="width:100%; height:100%; margin:0; padding:0; font-family: 'Helvetica Neue', Helvetica, sans-serif !important; font-size: 13px;">
    <head>
        <meta charset="utf-8">
        <title>WRAP Venus Map Geographic Feature Test</title>
        <script src="https://maps.googleapis.com/maps/api/js?client=gme-weathernewsinc&libraries=geometry"></script>
        <script type="text/javascript" src="3rd/js/jquery-1.10.2.min.js"></script>
        <script type="text/javascript" src="js/WRAP.DH-1.2.0.0.js"></script>
        <script type="text/javascript" src="js/WRAP.Geo-1.2.0.0.js"></script>
        <script type="text/javascript" src="js/WRAP.ASM.js"></script>

        <script type="text/javascript" src="map_test.js"></script>

    </head>
    <body style="width:100%; height:100%; margin:0; padding:0; background-color:rgb(255,255,255);">
        <div style="color:black; position:absolute; left:20px; top:8px;">Map Geographic Feature</div>
        <label style="position:absolute; width:100px; height:18px; left:180px; top:8px;">Element</label>
        <select id="element" style="position:absolute; width:105px; left:235px; top:6px; height:18px;">
            <option value="line" selected>Line</option>
            <option value="polygon">Polygon</option>
            <option value="text">Text</option>
            <option value="image">Image</option>
            <option value="point">Point</option>
            <option value="option">Line Option</option>
        </select>
        <label style="position:absolute; width:200px; height:18px; left:370px; top:8px;">Longitude Offset</label>
        <input type="number" id="offset" step="1.0" min="-360" max="360" value="0.0"
                style="position:absolute; width:60px; left:480px; top:2px; height:20px;"/>
        
        <label style="position:absolute; width:260px; height:18px; left:570px; top:6px;">
            <input type="checkbox" id="normalize" checked>
                <spawn style="position:absolute; top:0px; left:20px;">Normalize Longitude (-180〜+180)</spawn>
        </label>

        <div id="map_canvas" style="position:absolute; top:30px; bottom:10px; left:10px; right:10px;"></div>

        <script type="text/javascript">
            
            // Mapの初期画角
            var initial_lat = 40.65;
            var initial_lon = 140.045;
            var initial_zoom = 3;
            var map_canvas = document.getElementById('map_canvas');
            
            var g_map = new google.maps.Map(map_canvas, {
                zoom: initial_zoom,
                minZoom: 1,
                maxZoom: 15,
                center: new google.maps.LatLng(initial_lat, initial_lon),
                zoomControl: true,
                mapTypeControl: false,
                scaleControl: false,
                streetViewControl: false,
                draggableCursor: "default",
                mapTypeId: google.maps.MapTypeId.ROADMAP
            });
            WRAP.Geo.setGoogleMaps(g_map);

            WRAP.Geo.setInteraction(map_canvas);
            
            var map_test = new MapTest();
            
            function updateContent() {
                var element = $('#element').val();
                var offset = $('#offset').val();
                var normalize = $('#normalize').prop('checked');
                
                map_test[element](offset, normalize);
                //console.log("element="+element+" offset="+offset+" normalize="+normalize);
            }
            
            $('input').change(updateContent);
            $(':input').bind('keyup mouseup', updateContent);

            $('select').change(updateContent);
            
            updateContent();
            
        </script>
        
    </body>
</html>
